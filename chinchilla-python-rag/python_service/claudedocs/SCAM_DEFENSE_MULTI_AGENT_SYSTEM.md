# ê¸ˆìœµ ì‚¬ê¸° íƒì§€ ë° ëŒ€ì‘ ë©€í‹° ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ

## ğŸ“‹ ê°œìš”

RAG(Retrieval-Augmented Generation)ì™€ Web Searchë¥¼ í™œìš©í•˜ì—¬ ì •í™•í•œ ì§€ì‹ ê¸°ë°˜ ë‹µë³€ì„ ì œê³µí•˜ëŠ” ê¸ˆìœµ ì‚¬ê¸° íƒì§€ ë° ëŒ€ì‘ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### í•µì‹¬ íŠ¹ì§•

- **ë©€í‹° ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜**: ë¶„ì„ â†’ íŒë‹¨ â†’ ì¡°ì–¸ì˜ 3ë‹¨ê³„ ì—ì´ì „íŠ¸ íŒŒì´í”„ë¼ì¸
- **ë‹¤ì¤‘ ë°ì´í„° ì†ŒìŠ¤**: RAG (ChromaDB) + ì‹¤ì‹œê°„ íŒ¨í„´ ë§¤ì¹­ + ì›¹ ê²€ìƒ‰
- **ì‹¤ì‹œê°„ ì‚¬ê¸° DB ì—°ë™**: ìµœì‹  ì‚¬ê¸° ìˆ˜ë²• ë° íŠ¸ë Œë“œ ë°˜ì˜
- **ê³ ì •ë°€ íŒ¨í„´ ë§¤ì¹­**: ë¡œì»¬ ì‚¬ê¸° íŒ¨í„´ DBë¥¼ í™œìš©í•œ ì¦‰ê°ì ì¸ ìœ„í—˜ íƒì§€

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
ì‚¬ìš©ì ë©”ì‹œì§€
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stage 0: ì‹¤ì‹œê°„ íŒ¨í„´ ë¶„ì„ (FraudPatternMatcher)      â”‚
â”‚  - ë¡œì»¬ íŒ¨í„´ DB ë§¤ì¹­                                   â”‚
â”‚  - í‚¤ì›Œë“œ ì¶”ì¶œ & ìœ„í—˜ë„ ì ìˆ˜ ê³„ì‚°                        â”‚
â”‚  - ì—°ë½ì²˜/URL ë¶„ì„                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë°ì´í„° ìˆ˜ì§‘ (ë³‘ë ¬ ì²˜ë¦¬)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  RAG ê²€ìƒ‰        â”‚  â”‚  ì›¹ ê²€ìƒ‰          â”‚          â”‚
â”‚  â”‚  (ChromaDB)     â”‚  â”‚  (SERP API)      â”‚          â”‚
â”‚  â”‚  - ì§€ì‹ ë² ì´ìŠ¤   â”‚  â”‚  - ìµœì‹  ì‚¬ê¸° ìˆ˜ë²• â”‚          â”‚
â”‚  â”‚  - ì‚¬ê¸° íŒ¨í„´     â”‚  â”‚  - ì‹ ê³  ì‚¬ë¡€     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent 1: ë¶„ì„ Agent (Analysis)                      â”‚
â”‚  - ì˜ì‹¬ ìš”ì†Œ ì¶”ì¶œ                                      â”‚
â”‚  - ì‚¬ê¸° íŒ¨í„´ ì¢…í•© ë¶„ì„                                 â”‚
â”‚  - ë°œì‹ ì/ì—°ë½ì²˜ íŠ¹ì´ì‚¬í•­ ë¶„ì„                          â”‚
â”‚  - ìµœì‹  íŠ¸ë Œë“œ ë°˜ì˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent 2: íŒë‹¨ Agent (Verdict)                       â”‚
â”‚  - ìœ„í—˜ë„ í‰ê°€ (ë§¤ìš°ë†’ìŒ/ë†’ìŒ/ì¤‘ê°„/ë‚®ìŒ)                â”‚
â”‚  - ì‚¬ê¸° ìœ í˜• ë¶„ë¥˜                                      â”‚
â”‚  - ì‹ ë¢°ë„ ì ìˆ˜ ì‚°ì¶œ                                    â”‚
â”‚  - ì¦‰ì‹œ í–‰ë™ & ê¸ˆì§€ í–‰ë™ ë„ì¶œ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent 3: ì¡°ì–¸ Agent (Counsel)                       â”‚
â”‚  - êµ¬ì¡°í™”ëœ ëŒ€ì‘ ê°€ì´ë“œ ìƒì„±                           â”‚
â”‚  - ìš°ì„ ìˆœìœ„ë³„ í–‰ë™ ì§€ì¹¨                                â”‚
â”‚  - ì‹ ê³  ë°©ë²• & ì˜ˆë°© íŒ                                 â”‚
â”‚  - ì¶œì²˜ ëª…ì‹œ (RAG + íŒ¨í„´ + ì›¹)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ìµœì¢… ë‹µë³€ (êµ¬ì¡°í™”ëœ ì‚¬ê¸° ëŒ€ì‘ ê°€ì´ë“œ)
```

---

## ğŸ”§ ì£¼ìš” ì»´í¬ë„ŒíŠ¸

### 1. FraudPatternMatcher (ì‹¤ì‹œê°„ íŒ¨í„´ ë¶„ì„)

**íŒŒì¼**: `agent/tools/fraud_patterns.py`

#### ê¸°ëŠ¥

- ë¡œì»¬ ì‚¬ê¸° íŒ¨í„´ DBë¥¼ ì‚¬ìš©í•œ ì¦‰ê°ì ì¸ ë§¤ì¹­
- ê³ ìœ„í—˜/ì¤‘ìœ„í—˜ í‚¤ì›Œë“œ íƒì§€
- ì‚¬ê¸° ìœ í˜•ë³„ ì ìˆ˜ ê³„ì‚°
- ê¸´ê¸‰ í”Œë˜ê·¸ íƒì§€
- ì—°ë½ì²˜ & URL ì¶”ì¶œ ë° ë¶„ì„

#### ì£¼ìš” ë©”ì„œë“œ

```python
def analyze_message(message: str) -> Dict[str, Any]:
    """
    ì˜ì‹¬ ë©”ì‹œì§€ ì¢…í•© ë¶„ì„

    Returns:
        {
            "risk_level": "ë§¤ìš°ë†’ìŒ|ë†’ìŒ|ì¤‘ê°„|ë‚®ìŒ",
            "risk_score": int,
            "matched_keywords": List[str],
            "suspected_scam_types": List[Dict],
            "urgent_flags": List[str],
            "contact_analysis": Dict
        }
    """
```

#### ìœ„í—˜ë„ ê³„ì‚° ë¡œì§

```
ìœ„í—˜ë„ ì ìˆ˜ = (ê³ ìœ„í—˜ í‚¤ì›Œë“œ * 10) + (ì¤‘ìœ„í—˜ í‚¤ì›Œë“œ * 5) + ì‚¬ê¸° ìœ í˜• ë§¤ì¹­ ì ìˆ˜

- ì ìˆ˜ >= 50: ë§¤ìš°ë†’ìŒ ğŸš¨
- ì ìˆ˜ >= 30: ë†’ìŒ âš ï¸
- ì ìˆ˜ >= 15: ì¤‘ê°„ âš¡
- ì ìˆ˜ < 15: ë‚®ìŒ â„¹ï¸
```

---

### 2. RealtimeScamDatabase (ì‹¤ì‹œê°„ ì‚¬ê¸° DB)

**íŒŒì¼**: `agent/tools/fraud_patterns.py`

#### ê¸°ëŠ¥

- ì›¹ ê²€ìƒ‰ì„ í†µí•œ ìµœì‹  ì‚¬ê¸° íŠ¸ë Œë“œ ìˆ˜ì§‘
- íŠ¹ì • ì „í™”ë²ˆí˜¸/URL ì‚¬ê¸° ì—¬ë¶€ ê²€ì¦
- ì‹¤ì‹œê°„ ì‹ ê³  ì‚¬ë¡€ ì¡°íšŒ

#### ì£¼ìš” ë©”ì„œë“œ

```python
def search_recent_scams(
    scam_type: Optional[str] = None,
    keywords: Optional[List[str]] = None
) -> List[Document]:
    """ìµœì‹  ì‚¬ê¸° ì‚¬ë¡€ ì›¹ ê²€ìƒ‰"""

def search_scam_verification(phone_or_url: str) -> List[Document]:
    """íŠ¹ì • ë²ˆí˜¸/URL ì‚¬ê¸° ì—¬ë¶€ ê²€ì¦"""
```

#### ìš”êµ¬ì‚¬í•­

- SERP API Key í•„ìš” (í™˜ê²½ë³€ìˆ˜: `SERP_API_KEY`)
- ë¯¸ì„¤ì • ì‹œ ì›¹ ê²€ìƒ‰ ê¸°ëŠ¥ ë¹„í™œì„±í™” (RAG + íŒ¨í„´ ë§¤ì¹­ë§Œ ì‚¬ìš©)

---

### 3. ScamDefenseHooks (ë©€í‹° ì—ì´ì „íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬)

**íŒŒì¼**: `agent/categories/scam_defense.py`

#### ë©€í‹° ì—ì´ì „íŠ¸ íŒŒì´í”„ë¼ì¸

##### Agent 0: ì‹¤ì‹œê°„ íŒ¨í„´ ë¶„ì„ (ì „ì²˜ë¦¬)

```python
def _run_realtime_pattern_analysis(query: str) -> Dict:
    """ë¡œì»¬ íŒ¨í„´ DB ë§¤ì¹­ ë° ìœ„í—˜ë„ ì¦‰ì‹œ í‰ê°€"""
```

##### Agent 1: ë¶„ì„ Agent

```python
def _run_analysis(
    query: str,
    rag_context: str,
    web_context: str,
    pattern_analysis: Dict
) -> str:
    """ì˜ì‹¬ ë¬¸ì ì¢…í•© ë¶„ì„"""
```

**ì¶œë ¥ í˜•ì‹**:

```
### ğŸ“‹ ë¶„ì„ ë‹¨ê³„ ê²°ê³¼

#### 1. í•µì‹¬ ì˜ì‹¬ ìš”ì†Œ
- [bullet list]

#### 2. ì‹¤ì‹œê°„ íŒ¨í„´ ë§¤ì¹­
- ë§¤ì¹­ëœ ì‚¬ê¸° ìœ í˜•: [ë¦¬ìŠ¤íŠ¸]
- ë§¤ì¹­ëœ í‚¤ì›Œë“œ: [ë¦¬ìŠ¤íŠ¸]

#### 3. ë°œì‹ ì/ì—°ë½ì²˜ íŠ¹ì´ì‚¬í•­
- [ë¶„ì„ ë‚´ìš©]

#### 4. ìµœì‹  ì‚¬ê¸° íŠ¸ë Œë“œ (ì›¹ ê²€ìƒ‰)
- [ì›¹ ê²€ìƒ‰ ê²°ê³¼ ìš”ì•½]
```

##### Agent 2: íŒë‹¨ Agent

```python
def _run_verdict(
    query: str,
    rag_context: str,
    web_context: str,
    analysis: str,
    pattern_analysis: Dict
) -> Dict:
    """ì‚¬ê¸° ì—¬ë¶€ íŒë³„ ë° ìœ„í—˜ë„ í‰ê°€"""
```

**ì¶œë ¥ í˜•ì‹** (JSON):

```json
{
  "risk_level": "ë§¤ìš°ë†’ìŒ|ë†’ìŒ|ì¤‘ê°„|ë‚®ìŒ",
  "risk_icon": "ğŸš¨|âš ï¸|âš¡|â„¹ï¸",
  "scam_type": "ì‚¬ê¸° ìœ í˜• ì¶”ì •",
  "confidence": "íŒë‹¨ ê·¼ê±° ìš”ì•½",
  "key_evidence": ["ê·¼ê±°1", "ê·¼ê±°2"],
  "immediate_actions": ["ì¦‰ì‹œ í–‰ë™1", "í–‰ë™2"],
  "do_not_do": ["ê¸ˆì§€ í–‰ë™1", "í–‰ë™2"]
}
```

##### Agent 3: ì¡°ì–¸ Agent

```python
def _run_counsel(
    query: str,
    rag_context: str,
    web_context: str,
    analysis: str,
    verdict: Dict,
    pattern_analysis: Dict
) -> str:
    """ëŒ€ì‘ ë°©ë²• ì œì‹œ"""
```

**ì¶œë ¥ í˜•ì‹**:

```
### ğŸ¯ ìµœì¢… ëŒ€ì‘ ê°€ì´ë“œ

#### 1. ìœ„í—˜ë„ íŒë‹¨
{risk_icon} **{risk_level}** - {í•œì¤„ ìš”ì•½}

#### 2. ì‚¬ê¸° ìœ í˜• ë° ìˆ˜ë²•
- ìœ í˜•: {scam_type}
- ì£¼ìš” ìˆ˜ë²•: [ì„¤ëª…]

#### 3. âœ… ì¦‰ì‹œ í•´ì•¼ í•  ëŒ€ì‘ ë°©ë²•
1. [êµ¬ì²´ì  í–‰ë™ 1]
2. [êµ¬ì²´ì  í–‰ë™ 2]

#### 4. âŒ ì ˆëŒ€ í•˜ì§€ ë§ì•„ì•¼ í•  í–‰ë™
1. [ê¸ˆì§€ í–‰ë™ 1]
2. [ê¸ˆì§€ í–‰ë™ 2]

#### 5. ğŸ“ ì‹ ê³  ë°©ë²• ë° ì—°ë½ì²˜
- ê²½ì°°ì²­ ì‚¬ì´ë²„ì•ˆì „êµ­: 182
- ê¸ˆìœµê°ë…ì›: 1332
- í•œêµ­ì¸í„°ë„·ì§„í¥ì›: 118

#### 6. ğŸ’¡ ì˜ˆë°© íŒ
- [ì˜ˆë°©ë²• 1]
- [ì˜ˆë°©ë²• 2]

#### 7. ğŸ“š ì°¸ê³  ì¶œì²˜
- RAG ê²€ìƒ‰: [ì¶œì²˜]
- ì‹¤ì‹œê°„ íŒ¨í„´: [ë§¤ì¹­ ê²°ê³¼]
- ì›¹ ê²€ìƒ‰: [ìµœì‹  ì •ë³´]
```

---

### 4. Enhanced Web Search (ê°•í™”ëœ ì›¹ ê²€ìƒ‰)

**íŒŒì¼**: `agent/nodes/websearch.py`

#### ê¸°ëŠ¥

- ì‚¬ê¸° íƒì§€ ì¹´í…Œê³ ë¦¬ ì „ìš© ê°•í™” ê²€ìƒ‰
- íŒ¨í„´ ë¶„ì„ ê²°ê³¼ ê¸°ë°˜ íƒ€ê²ŸíŒ… ê²€ìƒ‰
- ì¼ë°˜ ì›¹ ê²€ìƒ‰ + íŠ¹í™” ê²€ìƒ‰ ë³‘í–‰

```python
def _enhanced_scam_websearch(state: Dict, hooks: Any) -> Dict:
    """
    1. ì‹¤ì‹œê°„ íŒ¨í„´ ë¶„ì„ ìˆ˜í–‰
    2. íŒ¨í„´ ê¸°ë°˜ ê°•í™” ì›¹ ê²€ìƒ‰
    3. ì¼ë°˜ ì›¹ ê²€ìƒ‰ ì¶”ê°€
    """
```

---

## ğŸ“Š ë°ì´í„° ì†ŒìŠ¤

### 1. RAG (ChromaDB)

**ìœ„ì¹˜**: `data/chroma_scam_defense/`

**ì»¬ë ‰ì…˜**: `scam_defense`

**ë°ì´í„°**:

- `data/scam_defense/scam_knowledge_base.json`: ì‚¬ê¸° ì§€ì‹ ë² ì´ìŠ¤ (10ê°œ ë¬¸ì„œ)
- `data/scam_defense/scam_patterns.json`: ì‚¬ê¸° íŒ¨í„´ DB (6ê°œ ìœ í˜•)

**ê²€ìƒ‰ ë°©ì‹**: Solar Embedding + ìœ ì‚¬ë„ ê²€ìƒ‰ (Top-K=8)

### 2. ì‹¤ì‹œê°„ íŒ¨í„´ ë§¤ì¹­

**ìœ„ì¹˜**: `data/scam_defense/scam_patterns.json`

**íŒ¨í„´ êµ¬ì¡°**:

```json
{
  "financial_scams": [
    {
      "type": "ë³´ì´ìŠ¤í”¼ì‹±",
      "category": "ê¸ˆìœµê¸°ê´€ ì‚¬ì¹­",
      "danger_level": "ë§¤ìš°ë†’ìŒ",
      "patterns": ["OTP", "ë³´ì•ˆì¹´ë“œ", "ê³„ì¢Œ ì •ì§€"],
      "sender_patterns": ["KBêµ­ë¯¼ì€í–‰", "ì‹ í•œì€í–‰"],
      "response_actions": [...],
      "prevention_tips": [...]
    }
  ],
  "keywords": {
    "high_risk": ["OTP", "ì•ˆì „ê³„ì¢Œ", "ì„ ì…ê¸ˆ"],
    "medium_risk": ["ëŒ€ì¶œ", "íˆ¬ì", "ìˆ˜ìµ ë³´ì¥"]
  },
  "legitimate_contacts": {
    "ê²½ì°°ì²­ ì‚¬ì´ë²„ì•ˆì „êµ­": "182",
    "ê¸ˆìœµê°ë…ì›": "1332"
  }
}
```

### 3. ì›¹ ê²€ìƒ‰ (SERP API)

**ê²€ìƒ‰ ì¿¼ë¦¬ ì˜ˆì‹œ**:

- `"{ì‚¬ê¸°_ìœ í˜•} {í‚¤ì›Œë“œ} ìµœì‹  ìˆ˜ë²• ì‹ ê³ "`
- `"{ì „í™”ë²ˆí˜¸} ì‚¬ê¸° ì‹ ê³  í›„ê¸°"`
- `"ë³´ì´ìŠ¤í”¼ì‹± ì‚¬ê¸° ìµœì‹  ìˆ˜ë²•"`

**í™œìš©**:

- ìµœì‹  ì‚¬ê¸° íŠ¸ë Œë“œ íŒŒì•…
- íŠ¹ì • ë²ˆí˜¸/URL ê²€ì¦
- ì‹ ê³  ì‚¬ë¡€ ìˆ˜ì§‘

---

## ğŸš€ ì‚¬ìš© ë°©ë²•

### 1. í™˜ê²½ ì„¤ì •

```bash
# .env íŒŒì¼ ì„¤ì •
UPSTAGE_API_KEY=your_upstage_api_key
SERP_API_KEY=your_serp_api_key  # ì„ íƒì‚¬í•­ (ì›¹ ê²€ìƒ‰ í™œì„±í™”)
```

### 2. ë²¡í„° DB êµ¬ì¶•

```bash
# ì‚¬ê¸° íŒ¨í„´ ë²¡í„° DB ìƒì„±
python scripts/build_scam_vectordb.py
```

### 3. í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# í†µí•© í…ŒìŠ¤íŠ¸
python scripts/test_scam_defense.py
```

#### í…ŒìŠ¤íŠ¸ êµ¬ì„±

1. **ì‹¤ì‹œê°„ íŒ¨í„´ ë§¤ì¹­ í…ŒìŠ¤íŠ¸**: `test_fraud_pattern_matcher()`
2. **RAG ê²€ìƒ‰ í…ŒìŠ¤íŠ¸**: `test_scam_retriever()`
3. **ì›¹ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸**: `test_realtime_scam_database()` (SERP API í•„ìš”)
4. **ë©€í‹° ì—ì´ì „íŠ¸ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸**: `test_multi_agent_workflow()`

### 4. API ì‚¬ìš©

```python
from app.schemas import ScamDefenseRequest, ScamDefensePayload
from agent.router import dispatch
from agent.router_runtime import get_runtime

# Runtime ì´ˆê¸°í™”
graphs, hooks = get_runtime()

# ìš”ì²­ ìƒì„±
request = ScamDefenseRequest(
    category="scam_defense",
    payload=ScamDefensePayload(
        query="KBì€í–‰ì…ë‹ˆë‹¤. OTP ë²ˆí˜¸ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.",
        sender="02-1234-5678"
    )
)

# ì‹¤í–‰
response = dispatch(request, graphs=graphs, hooks=hooks)

# ê²°ê³¼ í™•ì¸
print(response.answer)  # ìµœì¢… ëŒ€ì‘ ê°€ì´ë“œ
print(response.sources)  # ì°¸ê³  ë¬¸ì„œ
print(response.metadata)  # íŒ¨í„´ ë¶„ì„, íŒë‹¨ ê²°ê³¼ ë“±
```

---

## ğŸ“ˆ ì„±ëŠ¥ íŠ¹ì„±

### ì‘ë‹µ ì‹œê°„

- **ì‹¤ì‹œê°„ íŒ¨í„´ ë¶„ì„**: < 0.1ì´ˆ (ë¡œì»¬ ë§¤ì¹­)
- **RAG ê²€ìƒ‰**: 0.5 ~ 1ì´ˆ
- **ì›¹ ê²€ìƒ‰**: 2 ~ 5ì´ˆ (SERP API)
- **ë©€í‹° ì—ì´ì „íŠ¸ ì²˜ë¦¬**: 10 ~ 20ì´ˆ (LLM í˜¸ì¶œ 3íšŒ)

### ì •í™•ë„

- **íŒ¨í„´ ë§¤ì¹­**: ë†’ì€ ì¬í˜„ìœ¨ (Recall), ì¦‰ê°ì  ìœ„í—˜ ê°ì§€
- **RAG ê²€ìƒ‰**: ì •í™•í•œ ì§€ì‹ ê¸°ë°˜ ë‹µë³€
- **ì›¹ ê²€ìƒ‰**: ìµœì‹  íŠ¸ë Œë“œ ë°˜ì˜

---

## ğŸ” ì£¼ìš” ì‚¬ê¸° ìœ í˜•

### 1. ë³´ì´ìŠ¤í”¼ì‹±

#### ê¸ˆìœµê¸°ê´€ ì‚¬ì¹­

- **íŒ¨í„´**: OTP, ë³´ì•ˆì¹´ë“œ, ê³„ì¢Œ ì •ì§€
- **ìœ„í—˜ë„**: ë§¤ìš°ë†’ìŒ ğŸš¨

#### ê³µê³µê¸°ê´€ ì‚¬ì¹­

- **íŒ¨í„´**: ê²€ì°°ì²­, ê²½ì°°ì²­, ì•ˆì „ê³„ì¢Œ
- **ìœ„í—˜ë„**: ë§¤ìš°ë†’ìŒ ğŸš¨

### 2. ëŒ€ì¶œ ì‚¬ê¸°

- **íŒ¨í„´**: ì„ ì…ê¸ˆ, ìˆ˜ìˆ˜ë£Œ, 100% ìŠ¹ì¸
- **ìœ„í—˜ë„**: ë†’ìŒ âš ï¸

### 3. íˆ¬ì ì‚¬ê¸°

- **íŒ¨í„´**: ê³ ìˆ˜ìµ ë³´ì¥, ì›ê¸ˆ ë³´ì¥, ì›” 30% ìˆ˜ìµ
- **ìœ„í—˜ë„**: ë†’ìŒ âš ï¸

### 4. í”¼ì‹±

- **íŒ¨í„´**: íƒë°°, ë§í¬ í´ë¦­, ê°œì¸ì •ë³´ ì…ë ¥
- **ìœ„í—˜ë„**: ì¤‘ê°„ âš¡

### 5. ë©”ì‹ ì € í”¼ì‹±

- **íŒ¨í„´**: ì§€ì¸ ì‚¬ì¹­, ê¸‰í•´, ê³„ì¢Œë²ˆí˜¸
- **ìœ„í—˜ë„**: ë†’ìŒ âš ï¸

---

## ğŸ› ï¸ í™•ì¥ ê°€ëŠ¥ì„±

### 1. íŒ¨í„´ DB ì—…ë°ì´íŠ¸

```bash
# data/scam_defense/scam_patterns.json ìˆ˜ì • í›„
python scripts/build_scam_vectordb.py
```

### 2. ì§€ì‹ ë² ì´ìŠ¤ í™•ì¥

```bash
# data/scam_defense/scam_knowledge_base.jsonì— ë¬¸ì„œ ì¶”ê°€ í›„
python scripts/build_scam_vectordb.py
```

### 3. ì¶”ê°€ ë°ì´í„° ì†ŒìŠ¤ í†µí•©

- ê¸ˆìœµê°ë…ì› API
- ê²½ì°°ì²­ ì‚¬ê¸° ì‹ ê³  DB
- ì‹¤ì‹œê°„ ë‰´ìŠ¤ í”¼ë“œ

### 4. ì¶”ê°€ ì—ì´ì „íŠ¸ ê°œë°œ

- ì´ë¯¸ì§€ ë¶„ì„ Agent (ìŠ¤ë¯¸ì‹± ì´ë¯¸ì§€ ê²€ì¦)
- ìŒì„± ë¶„ì„ Agent (ë³´ì´ìŠ¤í”¼ì‹± ìŒì„± ê²€ì¦)
- ì˜ˆì¸¡ Agent (ì‚¬ê¸° íŠ¸ë Œë“œ ì˜ˆì¸¡)

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- `ARCHITECTURE.md`: ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
- `SCAM_DEFENSE_GUIDE.md`: ì‚¬ê¸° ë°©ì–´ ê¸°ëŠ¥ ê°€ì´ë“œ
- `SCAM_DEFENSE_CHECKLIST.md`: êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸
- `SCAM_DEFENSE_IMPLEMENTATION_REPORT.md`: êµ¬í˜„ ë³´ê³ ì„œ

---

## ğŸ†˜ ì‹ ê³  ì—°ë½ì²˜

- **ê²½ì°°ì²­ ì‚¬ì´ë²„ì•ˆì „êµ­**: 182 (24ì‹œê°„)
- **ê¸ˆìœµê°ë…ì›**: 1332
- **í•œêµ­ì¸í„°ë„·ì§„í¥ì›**: 118
- **ë²”ì£„ì‹ ê³ **: 112
- **ê¸ˆìœµìœ„ì›íšŒ**: 02-2100-2114

---

## ğŸ“ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ê¸ˆìœµ ì‚¬ê¸° í”¼í•´ ì˜ˆë°©ì„ ëª©ì ìœ¼ë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ‘¥ ê¸°ì—¬

ê¸ˆìœµ ì‚¬ê¸° íŒ¨í„´ ì •ë³´ ì œê³µ ë° ì‹œìŠ¤í…œ ê°œì„  ì œì•ˆì„ í™˜ì˜í•©ë‹ˆë‹¤.

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025ë…„ 10ì›” 30ì¼
